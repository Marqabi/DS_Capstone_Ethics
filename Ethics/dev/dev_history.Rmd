---
title: "Ethics Package"
author: "Abdullah Almarqabi"
date: "15/11/2021"
output: html_document
editor_options: 
  chunk_output_type: console
---

```{r development, include=FALSE}
library(testthat)
library(markdown)
library(MASS)
```

<!--
# Description of your package

This will fill the description of your package.
--> 

```{r description, eval=FALSE}
# Describe your package
fusen::fill_description(
  pkg = here::here(),
  fields = list(
    Title = "Ethics Package",
    Description = "Provide ethical comments and guidelines on data sets and models.",
    `Authors@R` = c(
      person("Abdullah", "Almarqabi", email = "a.almarqabi@gmail.com", role = c("aut", "cre"), comment = c(ORCID = "0000-0002-1565-9313")),
      person(given = "ThinkR", role = "cph")
    )
  )
)
# Define License with use_*_license()
usethis::use_mit_license("Abdullah Almarqabi")
```

# Read data

<!-- Store your dataset in a directory named "inst/" at the root of your project -->
<!-- Use it for your tests in this Rmd thanks to `load_all()` to make it available
and `system.file()` to read it in your examples 
-->

```{r development-2}
# Run all in the console directly
# Create "inst/" directory
dir.create(here::here("inst"))
# Example dataset
# file.copy(system.file("nyc_squirrels_sample.csv", package = "fusen"), here::here("inst"))
# Make your dataset file available to the current Rmd
pkgload::load_all(path = here::here(), export_all = FALSE)
# You will be able to read your example data file in each of your function examples and tests as follows
# datafile <- system.file("nyc_squirrels_sample.csv", package = "Ethics")
# nyc_squirrels <- read.csv(datafile)
```


# Short ethics comments and tips

```{r function}
#' ethics
#'
#' @param x Data set or model
#' @inheritParams 
#'
#' @return
#' Comments and guidelines
#' @export
#'
#' @examples
ethics <- function(x) 
{
  if(class(x) =='lm')
    {
    cat("This is of class lm.
    
Tips for linear models: 
- Check for collinearity. It can be difficult to separate out the individual effects of collinear variables on the response. collinearity can cause predictor variables to appear as statistically insignificant when in fact they are significant.

- Make sure there is no multi-colinearity. multicollinearity can arise when one feature is linearly related to two or more features. If present, implement PCR.")
    }
       else if(class(x) =='glm')
    {
    cat("This is a logistic regression model.
    
Tips for logistic regrission models:
- In case of multinomial classification, the assumptions will increase and the stability of the coefficient estimates and accuracy will decrease. In that case, more advanced models like regulization would be more adequate")

    }
    else if(x== Boston || x=="Boston")
      {
    cat("This is the Boston Housing data set.
    
- Source of bias: The data set has a (Black) coloumn which indicates the proportion of Black people per town. This could lead to racially discriminatory correlations.

- Many books and sites have removed the data set. It is recommended to not use it.

For more details use (ethics_long) function")
    }
  else 
    {
    cat("No information available")
    }
  
}


```

```{r examples}
ethics(Boston)
```

```{r tests}
test_that("my_median works properly and show error if needed", {
  expect_true(my_median(1:12) == 6.5)
  expect_error(my_median("text"))
})
```

# Detailed ethics comments

```{r function-1}
#' Detailed ethics comments
#'
#' @param x Data set or model
#' @inheritParams 
#'
#' @return
#' Opens markdown file
#' @export
#'
#' @examples
ethics_long <- function(x) 
{
  if(x== Boston || x=="Boston" )
      {
      rmarkdown::run("dev/Boston.Rmd")
      
    }
  else 
    {
    cat("No information available")
    }
  
}


```

```{r examples-1}

```

```{r tests-1}
test_that("my_median works properly and show error if needed", {
  expect_true(my_other_median(1:12) == 6.5)
  expect_error(my_other_median("text"))
})
```




```{r development-1, eval=FALSE}
# Run but keep eval=FALSE to avoid infinite loop
# Execute in the console directly
fusen::inflate(rmd = "dev/dev_history.Rmd")
```


# Inflate your package

You're one inflate from paper to box.
Build your package from this very Rmd using `fusen::inflate()`

- Verify your `"DESCRIPTION"` file has been updated
- Verify your function is in `"R/"` directory
- Verify your test is in `"tests/testthat/"` directory
- Verify this Rmd appears in `"vignettes/"` directory
